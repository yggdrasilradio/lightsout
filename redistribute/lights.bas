1DIMA(6,6):PCLEAR1:ONBRKGOTO6000:POKE&HE010,&H26:POKE&HE011,&H02:POKE&HE012,&H32:POKE&HE013,&H62:POKE&HE014,&H10:POKE&HE015,&H8E:POKE&HE016,&HFE:POKE&HE017,&H19:POKE&HE018,&H39:POKE&HEF68,&HBD:POKE&HEF69,&HE0
2POKE&HEF6A,&H10:POKE&HEF6B,&H12:POKE&HF015,&H21:POKE&HFFD9,0:HSCREEN2
10HCLS0:HCOLOR5:HPRINT(0,0),"Lights Out Puzzle":HPRINT(27,0),"by Rick Adams":HCOLOR4:HPRINT(5,19),"Click on lights to change them":HPRINT(5,21),"Turn off all the lights to win":R=RND(-TIMER):M=0:GOSUB1000
11GOSUB2000:GOSUB4000
100GOSUB3000:IFBUTTON(0)<>0 THENSOUND1,1:GOSUB7000
101IFN>0 THENGOTO100
102GOSUB5000:GOTO10
1000FORX=1TO5:FORY=1TO5:A(X,Y)=0:NEXT:NEXT:RETURN
2000FORK=1TO6:I=INT(5*RND(0)+1):J=INT(5*RND(0)+1):GOSUB8000:NEXT:RETURN
3000T=(T+1)AND7:X=117+(I-1)*16:Y=53+(J-1)*16:IFT AND4 THENHLINE(X,Y)-(X+12,Y+12),PRESET,B ELSEHCOLOR4:HLINE(X,Y)-(X+12,Y+12),PSET,B:I=INT(JOYSTK(0)/14)+1:J=INT(JOYSTK(1)/14)+1
3001RETURN
4000N=0:FORJ0=1TO5:Y=53+(J0-1)*16:FORI0=1TO5:X=117+(I0-1)*16:C=HPOINT(X,Y):IFC<>1 THENHCOLOR4:HLINE(X,Y)-(X+12,Y+12),PSET,B
4001C=HPOINT(X+1,Y+1):IFA(I0,J0)<0AND C<>2 THENHCOLOR9:HLINE(X+1,Y+1)-(X+11,Y+11),PSET,BF
4002IFA(I0,J0)=0AND C<>0 THENHLINE(X+1,Y+1)-(X+11,Y+11),PRESET,BF
4003IFA(I0,J0)<0 THENN=N+1
4004NEXT:NEXT:HCOLOR4:HPRINT(0,3),STRING$(40,32):M$=STR$(N)+" lights":IFM>0 THENM$=M$+" in"+STR$(M)+" moves"
4005HPRINT(INT(40-LEN(M$))/2-1,3),M$:M=M+1:RETURN
5000HCOLOR4:HPRINT(0,19),STRING$(40,32):HPRINT(12,19),"Congratulations!":HPRINT(0,21),STRING$(40,32):HPRINT(16,21),"You win!":HCOLOR5:HPRINT(6,23),"Press any key to play again":EXEC&HADFB:C$=INKEY$:RETURN
6000POKE&H71,0:EXEC&H8C1B
7000GOSUB8000:GOSUB4000:RETURN
8000A(I,J)=NOT A(I,J):A(I-1,J)=NOT A(I-1,J):A(I+1,J)=NOT A(I+1,J):A(I,J-1)=NOT A(I,J-1):A(I,J+1)=NOT A(I,J+1):RETURN
